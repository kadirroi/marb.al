<html>

	<body>
		
		<canvas id="myCanvas" height="500" width="500">
		
		</canvas>

		<script type="text/javascript">
				
			//Step 1 : prepare the canvas and get webgl context
			var canvas = document.getElementById("myCanvas");
			var gl = canvas.getContext("experimental-webgl");
			if (!gl)
				alert("gl fucked up");

			//Step 2 : define the geometry and store it in buffer objects
			var vertices = [
				-1.0, -0.5,
				-0.8, 0.5,
				-0.6, -0.5,
				-0.6, -0.5,
				-0.4, 0.5,
				-0.2, -0.5,
				-0.2, -0.5,
				0.0, 0.5,
				0.2, -0.5,
				0.2, -0.5,
				0.4, 0.5,
				0.6,-0.5,
				0.6, -0.5,
				0.8, 0.5,
				1.0,-0.5,
				1.0, -0.5,
				0.0, -1.0,
				-1.0, -0.5
			];
			var vertexBuffer = gl.createBuffer();
			gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
			gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
			
			//Step 3 : write and compile the shader programs
			var vertCode = 'attribute vec2 coordinates;'+
			'void main(void){gl_Position=vec4(coordinates,0.0,1.0);}';
			var vertShader = gl.createShader(gl.VERTEX_SHADER);
			gl.shaderSource(vertShader, vertCode);
			gl.compileShader(vertShader);
			if (!gl.getShaderParameter(vertShader, gl.COMPILE_STATUS)) {
	            alert(gl.getShaderInfoLog(vertShader));
        	}

			var fragCode = "void main(void){gl_FragColor=vec4(0.0,0.0,0.0,1.0);}";
			var fragShader = gl.createShader(gl.FRAGMENT_SHADER);
			gl.shaderSource(fragShader, fragCode);
			gl.compileShader(fragShader);
			if (!gl.getShaderParameter(fragShader, gl.COMPILE_STATUS)) {
	            alert(gl.getShaderInfoLog(fragShader));
        	}

			var shaderProgram = gl.createProgram();
			gl.attachShader(shaderProgram, vertShader);
			gl.attachShader(shaderProgram, fragShader);
			gl.linkProgram(shaderProgram);
			if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)){
				alert("Shader fucked up");
			}
			gl.useProgram(shaderProgram);

			//Step 4: associate the shader programs to buffer objects
			gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
			var coord = gl.getAttribLocation(shaderProgram, "coordinates");
			gl.vertexAttribPointer(coord, 2, gl.FLOAT, false, 0, 0);
			gl.enableVertexAttribArray(coord);

			//Step 5: drawing
			gl.clearColor(0.3, 0.3, 0.7, 1.0);
			gl.enable(gl.DEPTH_TEST); 
			gl.clear(gl.COLOR_BUFFER_BIT);
			gl.viewport(0,0,canvas.width,canvas.height);
			gl.drawArrays(gl.TRIANGLES, 0, vertices.length/2);

		</script>

	</body>

</html>
